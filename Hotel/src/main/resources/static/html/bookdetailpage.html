<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
 
 <meta charset="UTF-8"> 
<title>Insert title here</title>
<script type="text/javascript" src="../js/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
<link href="../css/bookpage.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
<script type="text/javascript" th:inline="javascript">

$(document).ready(function(){
	var url = window.location.href;

    var typeid = url.split("?")[1].split("&")[0].split("=")[1]
    var inTime = url.split("&")[1].split("=")[1]; 
    var outTime = url.split("&")[2].split("=")[1];
    var img = url.split("&")[3].split("=")[1];
    var price = url.split("&")[4].split("=")[1];
    var description = url.split("&")[5].split("=")[1];
    var type = url.split("&")[6].split("=")[1];
    var livedays = url.split("&")[7].split("=")[1];
    
    var roomtype = decodeURI(type);
    var roominfo = decodeURI(description);
    $("#inTime").html(inTime);
    $("#outTime").html(outTime);
    document.getElementById("typeid").value = typeid;

 
    document.getElementById("pic").src = img; 
    $("#price").html(parseInt(price)*parseInt(livedays));  
    $("#type").html(roomtype);
    $("#roominfo").html(roominfo);
    
    //遍历出该用户的所有房客资料
 $.ajax({
	 url:"../loginer/allPerson", 
	 success:function(data){
		 for (var i = 0; i < data.length; i++) {
  			    var tr=$("<tr></tr>")
				var radio = $("<td style='text-align:center'></td>").html("<input type='radio' name='passenger' value='"+data[i].person_id+"'>");
				var name=$("<td style='text-align:center'></td>").html(data[i].name);
				var idcard=$("<td style='text-align:center'></td>").html(data[i].idcard);
				var tel=$("<td style='text-align:center'></td>").html(data[i].tel);
				
				tr.append(radio);
				tr.append(name);
				tr.append(idcard);
				tr.append(tel);
				$("#passenger").append(tr);
			  }					 
	 }
	 
 }) 
 //遍历出所有用户的评价
 $.ajax({
      url:"",	 
	  success:function(data){
		  
		  
		  
	  }
	 
	 
	 
 })
 
 
  
            })
            
 /*添加房客  */        
 function addPassenger(){
	$.ajax({
		url:"../person/addperson",
		data:{
			name:$("#personName").val(),
			tel:$("#tel").val(),
			idcard:$("#idcard").val(),
		},
		success:function(data){
			var tr=$("<tr></tr>")
			var radio = $("<td style='text-align:center'></td>").html("<input type='radio' name='passenger' value='"+data.person_id+"'>");
			var name=$("<td style='text-align:center'></td>").html(data.name);
			var idcard=$("<td style='text-align:center'></td>").html(data.idcard);
			var tel=$("<td style='text-align:center'></td>").html(data.tel);
			tr.append(radio);
			tr.append(name);
			tr.append(idcard);
			tr.append(tel);
			$("#passenger").append(tr);
		}
		
			
		}) 
	
}

   
</script>


</head>
<body>
<input type="hidden" id="typeid">

	<div class="head">
	<div class="headtitle">罗马假日酒店</div>
	
	
	<div class="loginimg"><img src="../img/register.png" /> </div>
	<div class="login">用户：</div>
    <div class="login" th:text=${session.uid}></div>
	</div>	

	<div class="typedetail">
	预定信息<br>
	
	<img  id="pic" style="width:120px"/><br>
	房间类型:<span id="type" ></span><br>
	基本信息:<span id="roominfo" ></span><br>
	入住时间:<span id="inTime" ></span><br>
	离开时间:<span id="outTime" ></span><br>
	总计费用:<span id="price" style="color:red"></span>
	
	</div>
	
	
	<!-- 入住房客信息  -->
	
	<table class="table table-striped" style="width:600px;margin:auto">
	<thead>
		<tr>
		    <th style='text-align:center'>选择房客</th>
			<th style='text-align:center'>姓名</th>
			<th style='text-align:center'>身份证</th>
			<th style='text-align:center'>电话</th>
			
			
		</tr>
	</thead>
	<tbody id="passenger">
		
	</tbody>
</table>
<br>
<br>
<!-- 添加房客 -->
<div class="addpassenger">
姓名：<input type="text" id="personName">
身份证：<input type="text" id="idcard">
电话<input type="text" id="tel">
</div>
<!-- 添加房客信息按钮 -->
<button class="addpassengerbutton" onclick="addPassenger()">添加房客</button>
<!-- 留言 -->
<div class="message">留言：<input type="text" id="msg"></div>
<!-- 提交订单按钮 -->
<button class="bookbutton">提交订单</button>

<!--评价 -->
<div class="container">
  <h3>用户评价</h3>
  <!-- 左对齐 -->
  <div class="media">
    
    <div class="media-body">
      <h4 class="media-heading">左对齐</h4>
      <p>这是一些示例文本。这是一些示例文本。这是一些示例文本。这是一些示例文本。这是一些示例文本。这是一些示例文本。这是一些示例文本。这是一些示例文本。</p>
    </div>
  </div>
  <hr>
  </div>
</body>
</html>